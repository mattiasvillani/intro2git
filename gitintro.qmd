---
title: "An Brief Introduction to Git"
author: "Mattias Villani"
editor: visual
---

## What Git (and Github) can do for you

-   **Version control** of your code and other files.

-   Allows you to **go back in time**. No more:

    -   Thesis_v1.tex

    -   ThesisFinal.tex

    -   ThesisReallyFinal.tex

    -   ThesisReallyReallyFinal.tex

-   **Development**. Test new code features with branches. Abandon or merge.

-   **Collaboration**. Work on the same code separately and merge later.

-   **Share** code (and show off code) (GitHub)

## Git is part of our culture

|  |  |  |
|--------------------------|---------------------------|------------------|
| ![](figs/GitEmergencey.png){fig-align="center" width="147"} | ![](figs/gitfiregirlmeme.webp){fig-align="center" width="200"} | ![](figs/gitmergememe.jpg){width="225"} |

Source: [**Meme Git Compilation**](https://medium.com/@lulu.ilmaknun.q/kompilasi-meme-git-e2fe49c6e33e)

## What is version control?

Version control by a thousand folders ðŸ¤¢

![](figs/VersionControlBad.webp)

Version control the right way ðŸ˜Š (but initially: ðŸ˜µ )

![](figs/VersionControl.webp)

-   Commits are well defined chunks of changes.

-   Knows *what* the changes were, *who* did the change, and *when* they were made.

-   Can revert a commit to undo changes.

-   Development in branches that can abandoned or used (merged).

## What is Git?

-   Git was famously created by Linus Torvalds (creator of the Linux kernel) in a couple of weeks.

![](figs/torvalds.jpeg){fig-align="center" width="363"}

-   Git is a **decentralized** version control system:

    -   Users have local repository with full offline version control on their computers.

    -   Can push to global repository (on Github) to collaborate with others.

-   Used by \> 90% of developers according to Stack Overflow surveys.

-   Fast

## What is GitHub?

-   Place for hosting repositories online.

-   Collaboration hub. A structured way to propose changes, review code, discuss, and approve before merging.

-   Forks, Issues, Pull request, activity etc.

-   *Github actions* for automated workflows (e.g. test your code on other operating systems)

![](figs/VillaniGithub.png)

![](figs/github-steel2.jpg)

[Daniel Stenberg's blog](https://daniel.haxx.se/blog/2021/03/23/github-steel/) (creator of curl)

## Git concepts and commands

![](figs/gitoperations.webp){fig-align="center"}

## Giting started

-   **Download git** from: <https://git-scm.com/download>

-   Make a free **github account**.

-   Basics: work from the terminal:

    -   Linux/Mac: use the system terminal

    -   Windows: use *Git Bash* from: <https://gitforwindows.org/>

-   Convenient: work from [RStudio](https://posit.co/download/rstudio-desktop/) or [VS Code](https://code.visualstudio.com/).

-   Serious: Dedicated git software: [Gitkraken](https://www.gitkraken.com/) and more.

![Git tab in Rstudio](figs/git_rstudio.png){fig-align="center" width="516"}

![Git in VS code](figs/git_vs.png){fig-align="center" width="436"}

![Git in VS code](figs/gitkraken.png){fig-align="center" width="480"}

## Initialize git repository

``` bash
> mkdir myrepo # create empty directory to hold your git repo
> cd myrepo    # move to myrepo folder
> git init     # initialize the git repo
Initialized empty Git repository in /home/mv/myrepo/.git/
> ls -a        # list all files, incl hidden files and folders starting with . 
.  ..  .git
```

## Add and commit a file

```{bash}
> echo "hello, git!" > file1.txt  # Opens a new file and puts hello, git! on first line
> git status  # shows that file1.txt is untracked by git
> git add .   # adds all files to the staging area (index)
> git status  # shows that file1.txt is staged
> git commit -m "added a first line to the project"
> git status  # shows that the working directory is clean, nothing new to commit
```

## Pushing to remote on Github

Go to [github.com](https://github.com/) and make a free Github account.

On your Github page, click *Repositories* tab and then make a new repository by clicking ![](figs/newrepobutton.png){width="42" height="18"}. Pick a name for the repo and optionally add a readme file and a license.

Copy the code from the section **â€¦or push an existing repository from the command line** in the terminal:

```{bash}
> git remote add origin git@github.com:mattiasvillani/myrepo.git # adds a remote repo on github to your local repo. The repo gets the name origin, by convention.
> git branch -M main # renames your default branch to main
> git push -u origin main # link the local branch to the remote branch and push your files to your github repository's main branch
```

Your local files and (only one for the moment) repository is now in sync with the remote repo on Github.

## Pulling from a remote on Github

-   Go to your Github repo and refresh the page to see your files there.

-   Add a README.md file by clicking on the big green button. Commit the file directly on github.

-   In your terminal get the git info from your github repo with **git fetch**

    ```{bash}
    > git fetch # downloads new commits from the remote
    ```

-   Merge the commit from remote to your local repo with **git merge**

    ```{bash}
    > git merge
    ```

-   You can do the fetch and merge steps as one with **git pull**.

-   `git add .` (note the period) adds all files in the current directory.

-   `git commit -am` "this is a commit" adds and commits at the same time.

## Working with Git in RStudio and VS code

**RStudio**:

-   Make an Rstudio project in your code folder (*myrepo*).

-   A Git tab should appear in the upper left window pane with all the things we did above: commit, pull, push etc.

**VS code**:

-   click the source control icon in the left panel: ![](figs/vscode_sourecontrol.svg){width="24"}

## Github pages

-   Github lets you host webpages on github pages.

-   My web page at [mattiasvillani.com](https://mattiasvillani.com/) is actually hosted on Github. Its adress is really [mattiasvillani.github.io](https://mattiasvillani.github.io/), I pay 20 USD a year for the domain name).

-   My workflow:

    -   Make a Quarto website for a new course/project.

    -   Use Quarto to build the web page.

    -   Push the webpage to a Github repo.

    -   Use Github pages to show the webpage.

    -   (Use Github action to build the webpage automatically when doing a git push)

## Working with branches

-   A branch (for example named `dev`) lets you experiment with a new feature in your code without affecting your `main` version (branch).

    ```{bash}
    > git branch # shows all branches wih a * on currently checkout branch
    > git dev    # creates a new branch named dev
    > git switch dev # switches to (makes active) the dev branch
    > echo "hello, git on dev!" > file2.txt # makes a new file
    > git add .  # staging all files, that is file2.txt
    > git commit -m "adding hello on dev" " # commit to local repo
    ```

    ::: callout-note
    `git switch` used be called `git checkout`, and that still works.
    :::

-   Check your local folder in your File Manager. The file file2.txt is there. No surprise.

-   Now checkout the main branch again with `git switch main`. Now check your File Manager again. file2.txt is not there!

-   Checkout the dev branch again (`git switch dev`). The file file2.txt is back!

-   To push your branch to github, do this when `dev` is checked out

    ```{bash}
    > git push -u origin dev # pushes the dev branch to github and links the local repo branch dev to github branch dev

    ```

-   Go to github (refresh page) and see that you have two branches now (dropdown meny upper left corner).

-   If `dev` was a successfully added feature, then merge the `dev` branch into `main`.

    ```{bash}
    > git switch main 
    > git merge dev # file2.txt is now part of main
    > git push      # pushes the changes to github
    > git branch -d dev # clean up by deleting the dev branch
    > git push origin --delete dev # if you also want to delete on github
    ```

## Some more git

-    Sometimes you try to merge two files that conflict. You then have to resolve the conflict. This can be a headache, but basically means that you have to decide for each change, which file "wins". There are **merge tools** for this.

-   The file `.gitignore` (create it in your repo) can be used to decide which files git will ignore (not track). For example `*.Rproj` or `.DS_Store`

-   `git log` shows history (commits)

-   `git log --oneline --graph --all` gives more info, also on existing branches.

-   `git clone git@github.com:mattiasvillani/myrepo.git` makes copy (clone) of a repository on github to your current directory.

-   You can **fork** a github repository, meaning that that github repository is copied to your github with links to the original repository.

-   Forking is a way to suggest changes to someones code (make a **pull request** (**PR**)), which they can then review and hopefully merge into their repository.

![](figs/fork.png){fig-align="center"}
